{"version":3,"sources":["assets/script/framework/component/VMTimer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gEAA2D;AAC3D,gDAA+C;AAEzC,IAAA,KAA8B,EAAE,CAAC,UAAU,EAAzC,OAAO,aAAA,EAAE,IAAI,UAAA,EAAE,QAAQ,cAAkB,CAAC;AAIlD;IAAuC,6BAAY;IAAnD;QAAA,qEA6CC;QA9BQ,sBAAgB,GAAY,KAAK,CAAC;;IA8B3C,CAAC;IA5CA,0BAAM,GAAN;QACC,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,cAAc,EAAE,CAAC;QAEhB,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE;QAC/B,CAAC,CAAC,CAAC;IACV,CAAC;IAED,4BAAQ,GAAR;IACA,CAAC;IAED,6BAAS,GAAT;IACA,CAAC;IAID,kCAAc,GAAd;QAAA,iBA2BC;QA1BA,aAAa;QACP,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,OAAO;QACP,IAAI,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,cAAc,CAAC;QACrC,OAAO;QACP,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,QAAQ,CAAC;;YACnB,IAAG,wBAAc,CAAC,aAAa,CAAC,QAAQ,GAAG,CAAC,EAAC;gBAC5C,wBAAc,CAAC,aAAa,CAAC,QAAQ,IAAI,CAAC,CAAC;aAC3C;YAED,IAAG,wBAAc,CAAC,aAAa,CAAC,QAAQ,IAAI,CAAC,EAAC;gBAC7C,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;aAC9B;YAED,IAAG,CAAC,KAAI,CAAC,gBAAgB,IAAI,wBAAc,CAAC,aAAa,CAAC,QAAQ,IAAI,EAAE,IAAI,OAAA,wBAAc,aAAd,wBAAc,uBAAd,wBAAc,CAAE,aAAa,0CAAE,SAAS,KAAI,CAAC,EAAC;gBACzH,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBAC7B,mBAAQ,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,GAAG,wBAAc,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;aACvF;YACD,wBAAwB;YACxB,6CAA6C;YAC7C,+CAA+C;YAE/C,sDAAsD;YACtD,IAAI;QACC,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;IACnC,CAAC;IA5CmB,SAAS;QAF7B,OAAO;QACP,IAAI,CAAC,mCAAmC,CAAC;OACrB,SAAS,CA6C7B;IAAD,gBAAC;CA7CD,AA6CC,CA7CsC,EAAE,CAAC,SAAS,GA6ClD;kBA7CoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import GameDataCenter from \"../../userData/GameDataCenter\";\nimport { AudioMng } from \"../manager/AudioMng\";\n\nconst { ccclass, menu, property } = cc._decorator;\n\n@ccclass\n@menu('ModelViewer/VM-Timer (计时器，每秒刷新时间)')\nexport default class TimerNode extends cc.Component {\n\tonLoad() {\n\t\tcc.game.addPersistRootNode(this.node);\n\t\tthis.createSchedule();\n\n        cc.game.on(cc.game.EVENT_SHOW, function () {\n        });\n\t}\n\n\tonEnable() {\n\t}\n\n\tonDisable() {\n\t}\n\n\tprivate playingDidaAudio: boolean = false;\n\n\tcreateSchedule(){\n\t\t// 以秒为单位的时间间隔\n        var interval = 1;\n        // 重复次数\n        var repeat = cc.macro.REPEAT_FOREVER;\n        // 开始延时\n        var delay = 0;\n        this.schedule(() =>{\n\t\t\tif(GameDataCenter.roomInfoModel.waitTime > 0){\n\t\t\t\tGameDataCenter.roomInfoModel.waitTime -= 1;\n\t\t\t}\n\n\t\t\tif(GameDataCenter.roomInfoModel.waitTime <= 0){\n\t\t\t\tthis.playingDidaAudio = false;\n\t\t\t}\n\n\t\t\tif(!this.playingDidaAudio && GameDataCenter.roomInfoModel.waitTime <= 12 && GameDataCenter?.roomInfoModel?.gameStage == 2){\n\t\t\t\tthis.playingDidaAudio = true;\n\t\t\t\tAudioMng.getInstance().playSFX(\"daojishi\", 12 - GameDataCenter.roomInfoModel.waitTime);\n\t\t\t}\n\t\t\t// 这里的 this 指向 component\n\t\t\t// if(GameDataCenter.playerModel.serverTime){\n\t\t\t// \tGameDataCenter.playerModel.serverTime += 1;\n\n\t\t\t// \tEventMng.emit(FrameEventConst.SERVER_TIME_CHANGE);\n\t\t\t// }\n        }, interval, repeat, delay);\n\t}\n}"]}