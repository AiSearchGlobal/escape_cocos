{"version":3,"sources":["assets/script/logic/ui/prefab/UIGameLayer.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Utils } from './../../../utils/Utils';\nimport auto_gameLayer from \"../../../data/autoui/prefab/auto_gameLayer\";\nimport { AudioMng } from \"../../../framework/manager/AudioMng\";\nimport UIBase from \"../../../framework/ui/UIBase\";\nimport UIHelp from \"../../../framework/ui/UIHelp\";\nimport { GameEvent } from \"../../../userData/EventConst\";\nimport GameDataCenter from \"../../../userData/GameDataCenter\";\nimport UIJiluLayer from \"./UIJiluLayer\";\nimport UIRankLayer from \"./UIRankLayer\";\nimport UIWeihuLayer from \"./UIWeihuLayer\";\nimport { i18nMgr } from '../../../framework/i18n/i18nMgr';\n\nconst { ccclass, menu, property } = cc._decorator;\n\n@ccclass\n@menu(\"UI/prefab/UIGameLayer\")\nexport default class UIGameLayer extends UIBase {\n\tui: auto_gameLayer = null;\n\n\tprotected static prefabUrl = \"gameLayer\";\n\tprotected static className = \"UIGameLayer\";\n\n\tpublic static instance: UIGameLayer = null;\n\n\t@property({ type: cc.Prefab })\n\tplayerPrefab: cc.Prefab = null;\n\t@property({ type: cc.Prefab })\n\tplayerNamePrefab: cc.Prefab = null;\n\t@property({ type: cc.Prefab })\n\tcoinPrefab: cc.Prefab = null;\n\n\t@property({ type: [cc.Sprite] })\n\ticonsSpr: cc.Sprite[] = [];\n\tprivate tipsIndex: number = 0;\n\tprivate tipsTween: cc.Tween = null;\n\tprivate tipsList: string[] = [];\n\n\tonUILoad() {\n\t\tthis.ui = this.node.addComponent(auto_gameLayer);\n\t\tUIGameLayer.instance = this;\n\t}\n\n\tonShow() {\n\n\t\tthis.onRegisterEvent(this.ui.outGame, this.outGame);\n\t\tthis.onRegisterEvent(this.ui.btn_room1, this.onRoom1Click);\n\t\tthis.onRegisterEvent(this.ui.btn_room2, this.onRoom2Click);\n\t\tthis.onRegisterEvent(this.ui.btn_room3, this.onRoom3Click);\n\t\tthis.onRegisterEvent(this.ui.btn_room4, this.onRoom4Click);\n\t\tthis.onRegisterEvent(this.ui.btn_room5, this.onRoom5Click);\n\t\tthis.onRegisterEvent(this.ui.btn_room6, this.onRoom6Click);\n\t\tthis.onRegisterEvent(this.ui.btn_room7, this.onRoom7Click);\n\t\tthis.onRegisterEvent(this.ui.btn_room8, this.onRoom8Click);\n\t\tthis.onRegisterEvent(this.ui.btn_chose_room, this.onChoseRoomClick);\n\t\tthis.onRegisterEvent(this.ui.btn_chose_betting_num, this.onChoseBettingNumClick);\n\t\tthis.onRegisterEvent(this.ui.toggle1, this.onBettingNum1Click);\n\t\tthis.onRegisterEvent(this.ui.toggle2, this.onBettingNum2Click);\n\t\tthis.onRegisterEvent(this.ui.toggle3, this.onBettingNum3Click);\n\t\tthis.onRegisterEvent(this.ui.btn_betting, this.onBettingClick);\n\t\tthis.onRegisterEvent(this.ui.btn_rank, this.onRankClick);\n\t\tthis.onRegisterEvent(this.ui.btn_jilu, this.onJiluClick);\n\n\t\tthis.initEvent(GameEvent.SET_DOORS, this.onStageChange);\n\t\tthis.initEvent(GameEvent.CLOSE_GAME, this.onCloseGame);\n\t\tthis.initEvent(GameEvent.OPEN_GAME, this.onOpenGame);\n\t\t(window as any).GetGameInfo()\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(res, '获取游戏信息成功')\n\t\t\t\tif (res.code == 0) {\n\t\t\t\t\t(window as any).currencyIcon = res.data.icon;\n\t\t\t\t\t(window as any).currencyName = res.data.coin;\n\n\t\t\t\t\tcc.assetManager.loadRemote((window as any).currencyIcon, (err, texture) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(texture, 'texture')\n\t\t\t\t\t\tconst spriteFrame = new cc.SpriteFrame(texture as cc.Texture2D);\n\t\t\t\t\t\tspriteFrame.addRef();\n\t\t\t\t\t\tthis.iconsSpr.forEach(item => {\n\t\t\t\t\t\t\titem.spriteFrame = spriteFrame;\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.log(err, '获取游戏信息失败')\n\t\t\t})\n\n\n\t}\n\n\tonHide() {\n\n\t}\n\n\tonStart() {\n\t}\n\n\tonCloseGame() {\n\t\tUIHelp.ShowUI(UIWeihuLayer);\n\t}\n\n\tonOpenGame() {\n\t\tUIHelp.CloseUI(UIWeihuLayer);\n\t}\n\n\t/** 切换房间类型，刷新页面 */\n\tresetRoomChose() {\n\t\tthis.ui.toggle1.getComponent(cc.Toggle).isChecked = true;\n\t\tthis.unscheduleAllCallbacks();\n\t\tthis.showLastKillerAni();\n\t}\n\n\tshowLastKillerAni() {\n\t\tconst coinName = {\n\t\t\tzh: '金币',\n\t\t\ten: 'Coin'\n\t\t}\n\t\tconst language = [\n\t\t\t{\n\t\t\t\t'zh': \"選擇房间，守護寶藏\",\n\t\t\t\t'en': \"Choose a Tribe, Guard the Treasure\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t'zh': \"成功躲避杀手獲得GSP獎勵\",\n\t\t\t\t'en': \"Successful escape the slayer GSP reward oh\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t'zh': \"上期杀手去了「XXX」\",\n\t\t\t\t'en': \"It just went「XXX」\"\n\t\t\t}\n\t\t]\n\n\t\tthis.tipsList = [\n\t\t\t`快选个房间躲起来，杀手要来了`,\n\t\t\t`成功躲避杀手获得${GameDataCenter.roomInfoModel.coinName}奖励哦`,\n\t\t\t`上期杀手去了「${GameDataCenter.roomInfoModel.lastShaRoomName}」`\n\t\t];\n\t\tif (GameDataCenter.roomInfoModel.gameStage <= 2) {\n\t\t\tthis.tipsIndex = 0;\n\t\t} else {\n\t\t\tthis.tipsIndex = 2;\n\t\t}\n\t\tUIHelp.SetLabel(this.ui.lab_shangqi, language[this.tipsIndex][i18nMgr.getlanguage()].replace(\"XXX\", GameDataCenter.roomInfoModel.lastShaRoomName));\n\t\tif (!this.tipsTween) {\n\t\t\tthis.tipsTween = cc.tween(this.ui.lab_shangqi)\n\t\t\tthis.tipsTween.repeatForever(\n\t\t\t\tcc.tween()\n\t\t\t\t\t.delay(2)\n\t\t\t\t\t.call(() => {\n\t\t\t\t\t\tUIHelp.SetLabel(this.ui.lab_shangqi, language[this.tipsIndex][i18nMgr.getlanguage()].replace(\"XXX\", GameDataCenter.roomInfoModel.lastShaRoomName));\n\t\t\t\t\t\tif (GameDataCenter.roomInfoModel.gameStage <= 2) {\n\t\t\t\t\t\t\tthis.tipsIndex += 1;\n\t\t\t\t\t\t\tif (this.tipsIndex > 2) {\n\t\t\t\t\t\t\t\tthis.tipsIndex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t).start();\n\t\t}\n\t}\n\n\toutGame() {\n\t\tthis.node.getChildByName('nodeSetting').active = true\n\n\t\t// const typeDvice = Utils.getQueryString(\"typeDvice\");\n\t\t// console.log(typeDvice, '链接有\"typeDvice\"参数,此值不为空;');\n\t\t// if (typeDvice == \"h5\") {\n\n\t\t//   window.history.back();\n\t\t// } else {\n\t\t//   const dataTemp = {\n\t\t// \tname: \"back\",\n\t\t//   };\n\t\t//   const dataJson = JSON.stringify(dataTemp);\n\t\t//   uni.postMessage({\n\t\t// \tdata: dataJson,\n\t\t//   });\n\t\t// }\n\t}\n\n\n\tonStageChange(stage: number) {\n\t\tswitch (stage) {\n\t\t\tcase 1:\n\t\t\t\tthis.setDoors(1);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.setDoors(1);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.setDoors(2);\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis.setDoors(2);\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.setDoors(2);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * 设置所有门的显示状态\n\t * @param type 1: 开，2:关\n\t */\n\tsetDoors(type: number) {\n\t\tfor (let i = 1; i <= 9; i++) {\n\t\t\tlet aniName = type == 1 ? \"open\" : `guan${i}`;\n\t\t\tlet spine: sp.Skeleton = this.ui[`men${i}`].getComponent(sp.Skeleton);\n\t\t\tspine.setAnimation(0, aniName, false);\n\t\t}\n\t}\n\n\topenAllDoors() {\n\t\tconsole.warn(\"打开所有门\")\n\t\tthis.scheduleOnce(() => {\n\t\t\tfor (let i = 1; i <= 9; i++) {\n\t\t\t\tlet spine: sp.Skeleton = this.ui[`men${i}`].getComponent(sp.Skeleton);\n\t\t\t\tif (spine.animation.indexOf(\"open\") == -1) {\n\t\t\t\t\tspine.setAnimation(0, `open${i}`, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 2);\n\n\t\tthis.scheduleOnce(() => {\n\t\t\tGameDataCenter.accountModel.players.forEach(element => {\n\t\t\t\telement.moveBack();\n\t\t\t});\n\t\t}, 2.5);\n\t}\n\n\tcloseAllDoors() {\n\t\tfor (let i = 1; i <= 9; i++) {\n\t\t\tlet spine: sp.Skeleton = this.ui[`men${i}`].getComponent(sp.Skeleton);\n\t\t\tspine.setAnimation(0, `close${i}`, false);\n\t\t}\n\t\tthis.scheduleOnce(() => {\n\t\t\tAudioMng.getInstance().playSFX(\"guanmen\");\n\t\t}, 0.3)\n\t}\n\n\tshowStage3Ani() {\n\t\tthis.scheduleOnce(this.closeAllDoors, GameDataCenter.roomInfoModel.waitTime - 1);\n\t}\n\n\topenDoor(id: number) {\n\t\tlet spine: sp.Skeleton = this.ui[`men${id}`].getComponent(sp.Skeleton);\n\t\tspine.setAnimation(0, `open${id}`, false);\n\t}\n\n\tresetRoomId() {\n\t\tthis.data.roomId = 0;\n\t}\n\n\tonBettingNumClick(id: number) {\n\t\tthis.scheduleOnce(() => {\n\t\t\tthis.ui.node_chose_coin.active = false;\n\t\t})\n\t\tGameDataCenter.roomInfoModel.bettingId = id;\n\t\tGameDataCenter.roomInfoModel.bettingNum = GameDataCenter.roomInfoModel[`bettingConfig${id}`];\n\t}\n\n\tonChoseBettingNumClick() {\n\t\tthis.ui.node_chose_coin.active = !this.ui.node_chose_coin.active;\n\t}\n\n\tonChoseRoomClick() {\n\t}\n\n\tonRoomClick(id: number) {\n\t\tif (GameDataCenter.roomInfoModel.roomId == id) {\n\t\t\treturn\n\t\t}\n\t\tGameDataCenter.roomInfoModel.roomId = id;\n\t\tGameDataCenter.socketModel.move(id);\n\t\tGameDataCenter.accountModel.myPlayer.moveToRoomById(id);\n\t}\n\n\tonBettingClick() {\n\t\tif (!GameDataCenter.roomInfoModel.roomId) {\n\t\t\tconst language = {\n\t\t\t\ten: 'Choose tribe before invest',\n\t\t\t\tzh: '選擇房间後投入'\n\t\t\t}\n\n\t\t\tUIHelp.ShowTips(language[i18nMgr.getlanguage()]);\n\t\t\treturn\n\t\t}\n\t\tGameDataCenter.socketModel.betting(GameDataCenter.roomInfoModel.roomId, GameDataCenter.roomInfoModel.bettingId);\n\t}\n\n\tonRankClick() {\n\t\tUIHelp.ShowUI(UIRankLayer);\n\t}\n\n\tonJiluClick() {\n\t\tUIHelp.ShowUI(UIJiluLayer);\n\t}\n\n\tonBettingNum1Click() {\n\t\tthis.onBettingNumClick(1);\n\t}\n\n\tonBettingNum2Click() {\n\t\tthis.onBettingNumClick(2);\n\t}\n\n\tonBettingNum3Click() {\n\t\tthis.onBettingNumClick(3);\n\t}\n\n\tonRoom1Click() {\n\t\tthis.onRoomClick(1);\n\t}\n\tonRoom2Click() {\n\t\tthis.onRoomClick(2);\n\t}\n\tonRoom3Click() {\n\t\tthis.onRoomClick(3);\n\t}\n\tonRoom4Click() {\n\t\tthis.onRoomClick(4);\n\t}\n\tonRoom5Click() {\n\t\tthis.onRoomClick(5);\n\t}\n\tonRoom6Click() {\n\t\tthis.onRoomClick(6);\n\t}\n\tonRoom7Click() {\n\t\tthis.onRoomClick(7);\n\t}\n\tonRoom8Click() {\n\t\tthis.onRoomClick(8);\n\t}\n\n\tdropCoins(roomId: number) {\n\t\tconst numCoins = 35;\n\t\tconst startDelay = 0.01;\n\t\tvar startPosition = this.ui[`btn_room${roomId}`].position;\n\t\tvar endPosList = [];\n\n\t\tfor (let i = 1; i <= 8; i++) {\n\t\t\tif (i != roomId) {\n\t\t\t\tendPosList.push(this.ui[`btn_room${i}`].position);\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < numCoins; i++) {\n\t\t\tthis.scheduleOnce(() => {\n\t\t\t\tlet coin = cc.instantiate(this.coinPrefab);\n\t\t\t\tcoin.setPosition(startPosition);\n\t\t\t\tthis.node.addChild(coin);\n\n\t\t\t\t// 初始隐藏状态\n\t\t\t\tcoin.opacity = 0;\n\t\t\t\tcoin.scale = 0;\n\t\t\t\tlet randomX = Utils.random(-65, 65); // 随机生成 x 坐标偏移量\n\t\t\t\tlet randomY = Utils.random(80, 120); // 随机生成 y 坐标偏移量\n\t\t\t\tlet randomY2 = Utils.random(-150, -100);\n\t\t\t\tlet endX = endPosList[Math.floor(i / 5)].x;\n\t\t\t\tlet endY = endPosList[Math.floor(i / 5)].y;\n\n\t\t\t\t// 动画序列\n\t\t\t\tlet delayTime = cc.delayTime(i * startDelay);\n\t\t\t\tlet showAction = cc.spawn(cc.fadeIn(0.3), cc.scaleTo(0.3, 1).easing(cc.easeBackOut()));\n\t\t\t\tlet riseAction = cc.moveBy(0.5, cc.v2(randomX, randomY)).easing(cc.easeCircleActionOut());\n\t\t\t\tlet fallAction = cc.moveBy(0.5, cc.v2(0, randomY2)).easing(cc.easeQuadraticActionIn());\n\t\t\t\tlet rotateAction = cc.repeatForever(cc.rotateBy(1, 360)); // 持续旋转\n\t\t\t\tlet delayTime2 = cc.delayTime(1 + numCoins * startDelay - i * startDelay);\n\t\t\t\tlet endAction = cc.moveTo(0.5, cc.v2(endX, endY)).easing(cc.easeQuadraticActionIn());\n\t\t\t\tlet removeAction = cc.removeSelf();\n\t\t\t\tlet sequence = cc.sequence(delayTime, showAction, riseAction, fallAction, delayTime2, endAction, removeAction);\n\t\t\t\tcoin.runAction(sequence);\n\n\t\t\t\tcoin.runAction(rotateAction); // 添加持续旋转动作\n\t\t\t}, i * startDelay);\n\t\t}\n\t}\n\n\tonClose() {\n\t\tUIHelp.CloseUI(UIGameLayer);\n\t}\n}"]}