{"version":3,"sources":["assets/script/utils/Log.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// 个人开关，只对log方法有效\nexport const LOG_TAG = {\n    SOCKET: { desc: 'LOG_SOCKET', isOpen: true },\n    HTTP: { desc: 'LOG_HTTP', isOpen: true },\n    TEST: { desc: 'LOG_TEST', isOpen: true },\n}\n\nexport class Log {\n    public static log(...args) {\n        var backLog = console.log || cc.log\n        var tag = LOG_TAG.TEST;\n\n        if (!tag || !tag.isOpen) {\n            return;\n        }\n        \n        let arr: Array<any> = Array.prototype.slice.call(arguments);\n        arr.splice(0, 0, `[${tag.desc}]`);\n        let info = Log.stack(2) + Log.getDateString() + \" \";\n        arr.splice(1, 0, info);\n        backLog.apply(backLog, arr);\n    }\n\n    public static logTag(tag, ...args) {\n        var backLog = console.log || cc.log\n        if (!tag || !tag.isOpen) {\n            return;\n        }\n\n        if(tag == LOG_TAG.SOCKET || tag == LOG_TAG.HTTP){\n            backLog.apply(backLog, args);\n        }else{\n            let arr: Array<any> = Array.prototype.slice.call(arguments);\n            arr.splice(0, 1, `[${tag.desc}]`);\n            let info = Log.stack(2) + Log.getDateString() + \" \";\n            arr.splice(1, 0, info);\n            backLog.apply(backLog, arr);\n        }\n    }\n\n    public static warn(...args) {\n        var backLog = console.warn || cc.warn\n        let arr: Array<any> = Array.prototype.slice.call(arguments);\n        let info = Log.stack(2) + Log.getDateString() + \" \";\n        arr.splice(0, 0, info);\n        backLog.apply(backLog, arr);\n    }\n\n    public static error(...args) {\n        var backLog = console.error || cc.error\n        let arr: Array<any> = Array.prototype.slice.call(arguments);\n        let info = Log.stack(2) + Log.getDateString() + \" \";\n        arr.splice(0, 0, info);\n        backLog.apply(backLog, arr);\n    }\n\n    private static getDateString(): string {\n        let d = new Date();\n        let str = d.getHours().toString();\n        let timeStr = \"\";\n        timeStr += (str.length == 1 ? \"0\" + str : str) + \":\";\n        str = d.getMinutes().toString();\n        timeStr += (str.length == 1 ? \"0\" + str : str) + \":\";\n        str = d.getSeconds().toString();\n        timeStr += (str.length == 1 ? \"0\" + str : str) + \":\";\n        str = d.getMilliseconds().toString();\n        if (str.length == 1) str = \"00\" + str;\n        if (str.length == 2) str = \"0\" + str;\n        timeStr += str;\n\n        timeStr = \"[\" + timeStr + \"]\";\n        return timeStr;\n    }\n\n    private static stack(index = 2): string {\n        var e = new Error();\n        var lines = e.stack.split(\"\\n\");\n        lines.shift();\n        var result = [];\n        lines.forEach(function (line) {\n            line = line.substring(7);\n            var lineBreak = line.split(\" \");\n            if (lineBreak.length < 2) {\n                result.push(lineBreak[0]);\n            } else {\n                result.push({ [lineBreak[0]]: lineBreak[1] });\n            }\n        });\n\n        var list = [];\n        if (index < result.length - 1) {\n            for (var a in result[index]) {\n                list.push(a);\n            }\n        }\n\n        if(list[0]){\n            var splitList = list[0].split(\".\");\n            return (splitList[0] + \".js->\" + splitList[1] + \":\");\n        }else{\n            return \"\"\n        }\n    }\n}"]}