{"version":3,"sources":["assets/script/logic/ui/Settings.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { i18nMgr } from \"../../framework/i18n/i18nMgr\";\nimport { AudioMng } from \"../../framework/manager/AudioMng\";\n\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Settings extends cc.Component {\n\n    @property(cc.Label)\n    labEn: cc.Label = null;\n\n    @property(cc.Label)\n    labZh: cc.Label = null;\n\n    @property(cc.Toggle)\n    toggleEffect: cc.Toggle = null;\n\n    @property(cc.Toggle)\n    toggleSound: cc.Toggle = null;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start () {\n\n    }\n\n    protected onEnable(): void {\n        const effect = localStorage.getItem('effect') || '1'\n        this.toggleEffect.isChecked = effect == '1'\n\n        const sound = localStorage.getItem('sound') || '1'\n        this.toggleSound.isChecked = sound == '1'\n\n        const language = i18nMgr.getlanguage()\n        this.labEn.node.active = language == 'en'\n        this.labZh.node.active = language == 'zh'\n\n        this.toggleSound.node.getChildByName('checkmark_2').active = !this.toggleSound.isChecked\n        this.toggleEffect.node.getChildByName('checkmark_2').active = !this.toggleEffect.isChecked\n    }\n\n    onToggleEffect(toggle: cc.Toggle) {\n        localStorage.setItem('effect', toggle.isChecked ? '1' : '0')\n        toggle.node.getChildByName('checkmark_2').active = !toggle.isChecked\n        AudioMng.getInstance().effectRatio = toggle.isChecked ? 1 : 0 \n    }\n\n    onToggleSound(toggle: cc.Toggle) {\n        localStorage.setItem('sound', toggle.isChecked ? '1' : '0')\n        toggle.node.getChildByName('checkmark_2').active = !toggle.isChecked\n        AudioMng.getInstance().bgmRatio = toggle.isChecked ? 1 : 0\n        if (toggle.isChecked) {\n            AudioMng.getInstance().playBGM()\n        }\n        else {\n            AudioMng.getInstance().stopBGM()\n        }\n    }\n\n    onToggleLanguage(toggle: cc.Toggle) {\n        const language = toggle.isChecked ? 'en' : 'zh'\n        this.labEn.node.active = language == 'en'\n        this.labZh.node.active = language == 'zh'\n        i18nMgr.setLanguage(language)\n    }\n\n    onBtnClose() {\n        this.node.active = false\n    }\n}\n"]}