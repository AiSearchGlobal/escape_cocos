{"version":3,"sources":["assets/script/userData/AccountModel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,qDAAoD;AACpD,4DAAuD;AACvD,mDAA8C;AAG9C;IAA0C,gCAAU;IAehD;QAAA,YACI,kBAAM,SAAS,CAAC,SACnB;QAhBM,YAAM,GAAW,EAAE,CAAC;QACpB,cAAQ,GAAW,EAAE,CAAC;QACtB,SAAG,GAAW,CAAC,CAAC;QAChB,YAAM,GAAW,CAAC,CAAC;QACnB,aAAO,GAA6B,IAAI,GAAG,EAAE,CAAC;QAC9C,gBAAU,GAAY,KAAK,CAAC;QAC5B,cAAQ,GAAW,EAAE,CAAC,CAAW,aAAa;QAC9C,gBAAU,GAAW,EAAE,CAAC;QACxB,gBAAU,GAAW,EAAE,CAAC;QACxB,eAAS,GAAW,EAAE,CAAC,CAAW,aAAa;QAC/C,iBAAW,GAAW,EAAE,CAAC;QACzB,iBAAW,GAAW,EAAE,CAAC;QACzB,SAAG,GAAW,EAAE,CAAC;;IAIxB,CAAC;IAED,8BAA8B;IAC9B,oCAAoC;IACpC,IAAI;IAEJ,+BAA+B;IAC/B,0BAA0B;IAC1B,mBAAmB;IACnB,IAAI;IAEJ,IAAI;IACJ,4BAAK,GAAL,UAAM,KAAa,EAAE,YAAoB;QAAzC,iBAeC;QAdG,IAAI,MAAM,GAAG;YACT,KAAK,EAAE,KAAK;YAEZ,YAAY,EAAE,YAAY;SAE7B,CAAA;QAED,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,KAAI,CAAC,WAAW,CAAC,eAAe,EAAE,MAAM,EAAE,UAAU,GAAG;gBACnD,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;gBACpB,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;gBACzB,OAAO,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAA;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM;IACN,iCAAU,GAAV;QAAA,iBA2BC;QA1BG,IAAI,MAAM,GAAG;YACT,SAAS,EAAE,wBAAc,CAAC,aAAa,CAAC,QAAQ;SACnD,CAAA;QAED,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,KAAI,CAAC,WAAW,CAAC,oBAAoB,EAAE,MAAM,EAAE,UAAU,GAAG;gBACxD,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;gBAEpB,IAAI,KAAK,GAAG;oBACR,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,IAAI,CAAC,YAAY;iBAC1B,CAAC;gBAEF,IAAI,KAAK,GAAG;oBACR,IAAI,EAAE,CAAC;oBACP,IAAI,EAAE,IAAI,CAAC,QAAQ;iBACtB,CAAC;gBAEF,IAAI,KAAK,GAAG;oBACR,IAAI,EAAE,CAAC;oBACP,aAAa,EAAE,IAAI,CAAC,aAAa;oBACjC,YAAY,EAAE,IAAI,CAAC,YAAY;iBAClC,CAAC;gBACF,OAAO,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;YACnC,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAA;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,MAAM;IACN,oCAAa,GAAb,UAAc,IAAY;QAA1B,iBAgCC;QA/BG,IAAI,MAAM,GAAG;YACT,SAAS,EAAE,wBAAc,CAAC,aAAa,CAAC,QAAQ;YAChD,IAAI,EAAE,IAAI;YACV,KAAK,EAAE,EAAE;SACZ,CAAA;QAED,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,IAAI,KAAI,CAAC,UAAU,EAAE;gBACjB,OAAO,CAAC,EAAE,CAAC,CAAC;gBACZ,OAAM;aACT;YACD,KAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,MAAM,EAAE,UAAU,GAAG;gBAC3D,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;gBACpB,IAAI,IAAI,GAAG,EAAE,CAAC;gBACd,KAAkB,UAAS,EAAT,KAAA,IAAI,CAAC,IAAI,EAAT,cAAS,EAAT,IAAS,EAAE;oBAAxB,IAAI,KAAK,SAAA;oBACV,IAAI,IAAI,GAAG;wBACP,IAAI,EAAE,CAAC;wBACP,IAAI,EAAE,KAAK;qBACd,CAAA;oBACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnB;gBAED,IAAI,IAAI,CAAC,MAAM,GAAG,EAAE,EAAE;oBAClB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;wBAClB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;wBACvB,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;qBAC1B;iBACJ;gBACD,OAAO,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC,CAAA;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,SAAS;IACT,8BAAO,GAAP;QAAA,iBAsBC;QArBG,IAAI,MAAM,GAAG;YACT,SAAS,EAAE,wBAAc,CAAC,aAAa,CAAC,QAAQ;SACnD,CAAA;QAED,IAAM,QAAQ,GAAG;YACb,EAAE,EAAE,KAAK;YACT,EAAE,EAAE,YAAY;SACnB,CAAA;QAED,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YAC/B,KAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,MAAM,EAAE,UAAC,GAAG;gBAC5C,IAAM,CAAC,GAAG,QAAQ,CAAC,iBAAO,CAAC,WAAW,EAAE,CAAC,CAAA;gBACzC,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;gBACpB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;gBACtC,KAAI,CAAC,SAAS,GAAG,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC;gBACvD,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBACzE,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;gBAEzF,OAAO,CAAC,IAAI,CAAC,CAAC;YAClB,CAAC,CAAC,CAAA;QACN,CAAC,CAAC,CAAC;IACP,CAAC;IAED,sBAAW,kCAAQ;aAAnB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACtC,CAAC;;;OAAA;IACL,mBAAC;AAAD,CA3IA,AA2IC,CA3IyC,oBAAU,GA2InD","file":"","sourceRoot":"/","sourcesContent":["import { i18nMgr } from \"../framework/i18n/i18nMgr\";\nimport IDataModel from \"../framework/model/IDataModel\";\nimport GameDataCenter from \"./GameDataCenter\";\nimport PlayerModel from \"./PlayerModel\";\n\nexport default class AccountModel extends IDataModel {\n    public avatar: string = \"\";\n    public nickName: string = \"\";\n    public uid: number = 0;\n    public status: number = 0;\n    public players: Map<number, PlayerModel> = new Map();\n    public noMoreJilu: boolean = false;\n    public myRankNo: string = \"\";           //vm显示排行榜自己排名\n    public lastRankNo: string = \"\";\n    public thisRankNo: string = \"\";\n    public myRankNum: string = \"\";           //vm显示排行榜自己金币\n    public lastRankNum: string = \"\";\n    public thisRankNum: string = \"\";\n    public jwt: string = \"\";\n\n    constructor() {\n        super('account');\n    }\n\n    // public get jwt() : string {\n    //     return this.Query(\"jwt\", \"\");\n    // }\n\n    // public set jwt(v : string) {\n    //     this.Set(\"jwt\", v);\n    //     this.Save();\n    // }\n\n    //登录\n    login(token: string, company_code: string): Promise<any> {\n        var params = {\n            token: token,\n\n            company_code: company_code,\n            // user_id: '1007'\n        }\n\n        return new Promise((resolve, reject) => {\n            this.postHttpMsg(\"game/v1/login\", params, function (res) {\n                let data = res.data;\n                console.log(data, '登录数据')\n                resolve(data);\n            }.bind(this))\n        });\n    }\n\n    //获取记录\n    getGameLog(): Promise<any> {\n        var params = {\n            room_type: GameDataCenter.roomInfoModel.roomType\n        }\n\n        return new Promise((resolve, reject) => {\n            this.postHttpMsg(\"game/v1/getGameLog\", params, function (res) {\n                let data = res.data;\n\n                var item1 = {\n                    type: 1,\n                    list: data.sha_100_list\n                };\n\n                var item2 = {\n                    type: 2,\n                    list: data.sha_list\n                };\n\n                var item3 = {\n                    type: 3,\n                    betting_total: data.betting_total,\n                    result_total: data.result_total,\n                };\n                resolve([item1, item2, item3]);\n            }.bind(this))\n        });\n    }\n\n    //下注记录\n    getBettingLog(page: number): Promise<any> {\n        var params = {\n            room_type: GameDataCenter.roomInfoModel.roomType,\n            page: page,\n            limit: 20\n        }\n\n        return new Promise((resolve, reject) => {\n            if (this.noMoreJilu) {\n                resolve([]);\n                return\n            }\n            this.postHttpMsg(\"game/v1/getbettinglog\", params, function (res) {\n                let data = res.data;\n                let list = [];\n                for (let index of data.list) {\n                    let item = {\n                        type: 4,\n                        user: index\n                    }\n                    list.push(item);\n                }\n\n                if (list.length < 20) {\n                    if (!this.noMoreJilu) {\n                        this.noMoreJilu = true;\n                        list.push({ type: 5 });\n                    }\n                }\n                resolve(list);\n            }.bind(this))\n        });\n    }\n\n    //获得排行榜数据\n    getRank(): Promise<any> {\n        var params = {\n            room_type: GameDataCenter.roomInfoModel.roomType\n        }\n\n        const language = {\n            zh: '未上榜',\n            en: 'Not Ranked'\n        }\n\n        return new Promise((resolve, reject) => {\n            this.postHttpMsg(\"game/v1/getRank\", params, (res) => {\n                const l = language[i18nMgr.getlanguage()]\n                let data = res.data;\n                this.lastRankNum = data.last_rank_num;\n                this.myRankNum = this.thisRankNum = data.this_rank_num;\n                this.lastRankNo = data.last_rank_no == 0 ? l : String(data.last_rank_no);\n                this.myRankNo = this.thisRankNo = data.this_rank_no == 0 ? l : String(data.this_rank_no);\n\n                resolve(data);\n            })\n        });\n    }\n\n    public get myPlayer(): PlayerModel {\n        return this.players.get(this.uid);\n    }\n}"]}